2025-05-23 02:07:20,633 - INFO - Using random seed: 42
2025-05-23 02:07:20,633 - INFO - Starting experiment with configuration:
2025-05-23 02:07:20,634 - INFO -   num_episodes: 10
2025-05-23 02:07:20,634 - INFO -   target_distance_range: (15.0, 50.0)
2025-05-23 02:07:20,634 - INFO -   random_seed: 42
2025-05-23 02:07:20,634 - INFO -   max_steps_per_episode: 100
2025-05-23 02:07:20,635 - INFO -   output_dir: experiment_results
2025-05-23 02:07:20,635 - INFO -   stuck_timeout: 15.0
2025-05-23 02:07:20,635 - INFO -   stuck_check_interval: 3.0
2025-05-23 02:07:20,635 - INFO -   episode_timeout: 120
2025-05-23 02:07:20,636 - INFO -   precompile_julia: True
2025-05-23 02:07:20,636 - INFO -   zmq_port: 5555
2025-05-23 02:07:20,636 - INFO -   debug_raycasting: False
2025-05-23 02:07:20,637 - INFO -   min_ray_checks: 3
2025-05-23 02:07:20,637 - INFO -   max_ray_checks: 7
2025-05-23 02:07:20,637 - INFO -   visualize_raycasts: False
2025-05-23 02:07:20,637 - INFO -   visualization_duration: 60.0
2025-05-23 02:07:23,836 - INFO - System information collected and saved
2025-05-23 02:07:23,840 - INFO - AirSim connection established successfully
2025-05-23 02:08:02,385 - INFO - Generating pool of 15 valid target locations...
2025-05-23 02:08:02,386 - INFO - Target distance range for episode 0: 15.0m - 50.0m
2025-05-23 02:08:02,386 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:02,386 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:02,474 - INFO - Found first valid target at [-15.77, -18.92, -8.21], altitude: 8.21m
2025-05-23 02:08:03,811 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:04,777 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 8.21m
2025-05-23 02:08:04,778 - INFO - Target distance range for episode 1: 15.5m - 38.5m
2025-05-23 02:08:04,778 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:04,778 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:04,864 - INFO - Found first valid target at [18.26, 4.51, -6.3], altitude: 6.30m
2025-05-23 02:08:06,164 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:07,156 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 6.30m
2025-05-23 02:08:07,158 - INFO - Target distance range for episode 2: 16.0m - 42.0m
2025-05-23 02:08:07,158 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:07,158 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:07,244 - INFO - Found first valid target at [-32.24, 20.88, -8.59], altitude: 8.59m
2025-05-23 02:08:08,530 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:09,449 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 8.59m
2025-05-23 02:08:09,450 - INFO - Target distance range for episode 3: 16.5m - 45.5m
2025-05-23 02:08:09,450 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:09,450 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:09,540 - INFO - Found first valid target at [-2.59, 18.7, -7.29], altitude: 7.29m
2025-05-23 02:08:10,832 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:11,775 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 7.29m
2025-05-23 02:08:11,777 - INFO - Target distance range for episode 4: 17.0m - 49.0m
2025-05-23 02:08:11,777 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:11,777 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:11,863 - INFO - Found first valid target at [27.36, -23.14, -3.12], altitude: 3.12m
2025-05-23 02:08:13,190 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:14,145 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 3.12m
2025-05-23 02:08:14,147 - INFO - Target distance range for episode 5: 17.5m - 50.0m
2025-05-23 02:08:14,147 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:14,147 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:14,232 - INFO - Found first valid target at [-19.25, 25.86, -7.25], altitude: 7.25m
2025-05-23 02:08:15,525 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:16,343 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 7.25m
2025-05-23 02:08:16,344 - INFO - Target distance range for episode 6: 18.0m - 50.0m
2025-05-23 02:08:16,344 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:16,344 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:16,433 - INFO - Found first valid target at [-38.92, -12.15, -7.58], altitude: 7.58m
2025-05-23 02:08:17,676 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:18,538 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 7.58m
2025-05-23 02:08:18,539 - INFO - Target distance range for episode 7: 18.5m - 50.0m
2025-05-23 02:08:18,539 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:18,539 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:18,641 - INFO - Found first valid target at [20.07, 8.97, -3.98], altitude: 3.98m
2025-05-23 02:08:19,873 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:20,827 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 3.98m
2025-05-23 02:08:20,828 - INFO - Target distance range for episode 8: 19.0m - 50.0m
2025-05-23 02:08:20,828 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:20,828 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:20,920 - INFO - Found first valid target at [-38.76, 0.6, -8.06], altitude: 8.06m
2025-05-23 02:08:22,210 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:23,151 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 8.06m
2025-05-23 02:08:23,152 - INFO - Target distance range for episode 9: 19.5m - 50.0m
2025-05-23 02:08:23,152 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:23,152 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:23,238 - INFO - Found first valid target at [1.0, 24.42, -3.43], altitude: 3.43m
2025-05-23 02:08:24,518 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:25,424 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 3.43m
2025-05-23 02:08:25,425 - INFO - Generated 10/15 targets in 23.0s (9 attempts)
2025-05-23 02:08:25,425 - INFO - Target distance range for episode 10: 20.0m - 50.0m
2025-05-23 02:08:25,426 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:25,426 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:25,504 - INFO - Found first valid target at [41.38, -5.66, -6.13], altitude: 6.13m
2025-05-23 02:08:26,794 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:27,759 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 6.13m
2025-05-23 02:08:27,760 - INFO - Target distance range for episode 11: 20.0m - 50.0m
2025-05-23 02:08:27,760 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:27,760 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:27,843 - INFO - Found first valid target at [-24.97, -22.62, -4.31], altitude: 4.31m
2025-05-23 02:08:29,080 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:30,043 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 4.31m
2025-05-23 02:08:30,044 - INFO - Target distance range for episode 12: 20.0m - 50.0m
2025-05-23 02:08:30,044 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:30,044 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:30,127 - INFO - Found first valid target at [31.41, -18.94, -6.14], altitude: 6.14m
2025-05-23 02:08:31,366 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:32,337 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 6.14m
2025-05-23 02:08:32,338 - INFO - Target distance range for episode 13: 20.0m - 50.0m
2025-05-23 02:08:32,338 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:32,338 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:32,422 - INFO - Found first valid target at [20.66, 13.17, -4.09], altitude: 4.09m
2025-05-23 02:08:33,764 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:34,699 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 4.09m
2025-05-23 02:08:34,700 - INFO - Target distance range for episode 14: 20.0m - 50.0m
2025-05-23 02:08:34,700 - WARNING - Sampling target with drone too close to ground (alt: -5.10m)
2025-05-23 02:08:34,700 - INFO - Adjusted sampling position to ensure minimum altitude: [4.167556653555948e-06, 5.0735470722429454e-06, -5.0] (alt: 5.00m)
2025-05-23 02:08:34,791 - INFO - Found first valid target at [33.43, -7.27, -5.81], altitude: 5.81m
2025-05-23 02:08:36,092 - INFO - Phase 2: Found 16 valid targets, focusing on refining these
2025-05-23 02:08:36,959 - INFO - Found 27 valid targets, selecting best with 0.00m clearance at altitude: 5.81m
2025-05-23 02:08:36,960 - INFO - Generated 15/15 targets in 34.6s (14 attempts)
2025-05-23 02:08:36,960 - INFO - Successfully generated pool of 15 targets in 34.6s
2025-05-23 02:08:36,962 - INFO - Saved pool of 15 targets to experiment_results\experiment_20250523_020720\target_pool.json
2025-05-23 02:08:36,962 - INFO - Starting episode 0 of 10
2025-05-23 02:08:36,963 - INFO - === Starting Episode 0 ===
2025-05-23 02:08:36,964 - INFO - Episode 0: Taking off...
2025-05-23 02:08:42,539 - INFO - Episode 0: Using pre-generated target 0 of 15
2025-05-23 02:08:42,539 - INFO - Episode 0: Initial distance to target: 25.48m
2025-05-23 02:08:42,540 - INFO - Episode 0: Initial position: [-0.0, 0.0, -1.67]
2025-05-23 02:08:42,540 - INFO - Episode 0: Target position: [-15.77, -18.92, -8.21]
2025-05-23 02:08:42,540 - INFO - Episode 0: Initial distance: 25.48m
2025-05-23 02:08:42,544 - INFO - Episode 0: Target verified with 3 rays
2025-05-23 02:08:57,860 - WARNING - Episode 0: Step 0 took 15.32s (unusually long)
2025-05-23 02:09:12,410 - WARNING - Collision detected during movement, cancelling task immediately
2025-05-23 02:09:12,412 - INFO - Episode 0: Obstacle detected during movement, triggering immediate replanning
2025-05-23 02:09:12,424 - INFO - Adding newly detected obstacle at [-14.97, -17.33, -7.07] to planning data
2025-05-23 02:09:12,424 - INFO - Episode 0: Putting drone in hover mode before dynamic replanning
2025-05-23 02:09:12,925 - INFO - Episode 0: Triggering dynamic replanning due to detected obstacle
2025-05-23 02:09:12,925 - ERROR - Error in episode 0: cannot access local variable 'observation' where it is not associated with a value
2025-05-23 02:09:12,930 - ERROR - Traceback (most recent call last):
  File "c:\Users\harshil_airsim_1\Desktop\AirSim\Hierarchical-Active-Inference-for-Autonomous-Drone-Navigation-in-Microsoft-AirSim\data_collection.py", line 3581, in run_experiment
    step_metrics, episode_summary = run_episode(
                                    ^^^^^^^^^^^^
  File "c:\Users\harshil_airsim_1\Desktop\AirSim\Hierarchical-Active-Inference-for-Autonomous-Drone-Navigation-in-Microsoft-AirSim\data_collection.py", line 3118, in run_episode
    next_waypoint, policy, planning_error, replanning_inference_time_ms = get_next_waypoint(needs_replanning=True)
                                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\harshil_airsim_1\Desktop\AirSim\Hierarchical-Active-Inference-for-Autonomous-Drone-Navigation-in-Microsoft-AirSim\data_collection.py", line 2695, in get_next_waypoint
    observation["replanning_reason"] = reason
    ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'observation' where it is not associated with a value

2025-05-23 02:09:12,931 - INFO - Saved recovery data for episode -1
2025-05-23 02:09:12,931 - INFO - Starting episode 1 of 10
2025-05-23 02:09:12,932 - INFO - === Starting Episode 1 ===
2025-05-23 02:09:12,933 - INFO - Episode 1: Taking off...
2025-05-23 02:09:18,625 - INFO - Episode 1: Using pre-generated target 1 of 15
2025-05-23 02:09:18,626 - INFO - Episode 1: Initial distance to target: 19.37m
2025-05-23 02:09:18,627 - INFO - Episode 1: Initial position: [-0.0, 0.0, -1.67]
2025-05-23 02:09:18,627 - INFO - Episode 1: Target position: [18.26, 4.51, -6.3]
2025-05-23 02:09:18,628 - INFO - Episode 1: Initial distance: 19.37m
2025-05-23 02:09:18,633 - INFO - Episode 1: Target verified with 3 rays
2025-05-23 02:09:23,846 - WARNING - Episode 1: Step 0 took 5.21s (unusually long)
2025-05-23 02:09:35,851 - WARNING - Episode 1: Step 3 took 6.05s (unusually long)
2025-05-23 02:09:35,852 - INFO - Episode 1: Target reached at step 4
2025-05-23 02:10:39,075 - INFO - Episode 1 completed: success
2025-05-23 02:10:39,076 - INFO -   Steps: 4, Duration: 17.23s
2025-05-23 02:10:39,076 - INFO -   Final distance: 1.48m, Collisions: 0
2025-05-23 02:10:39,076 - INFO -   Dynamic replanning events: 0
2025-05-23 02:10:39,090 - INFO - Saved recovery data for episode 1
2025-05-23 02:10:39,090 - INFO - Starting episode 2 of 10
2025-05-23 02:10:39,090 - INFO - === Starting Episode 2 ===
2025-05-23 02:10:39,093 - INFO - Episode 2: Taking off...
2025-05-23 02:10:44,683 - INFO - Episode 2: Using pre-generated target 2 of 15
2025-05-23 02:10:44,683 - INFO - Episode 2: Initial distance to target: 39.03m
2025-05-23 02:10:44,684 - INFO - Episode 2: Initial position: [-0.0, 0.0, -1.67]
2025-05-23 02:10:44,684 - INFO - Episode 2: Target position: [-32.24, 20.88, -8.59]
2025-05-23 02:10:44,684 - INFO - Episode 2: Initial distance: 39.03m
2025-05-23 02:10:44,688 - INFO - Episode 2: Target verified with 3 rays
2025-05-23 02:10:50,847 - WARNING - Episode 2: Step 0 took 6.16s (unusually long)
2025-05-23 02:11:09,347 - WARNING - Collision detected during movement, cancelling task immediately
2025-05-23 02:11:09,348 - INFO - Episode 2: Obstacle detected during movement, triggering immediate replanning
2025-05-23 02:11:09,361 - INFO - Adding newly detected obstacle at [-24.23, 15.04, -4.63] to planning data
2025-05-23 02:11:09,361 - INFO - Episode 2: Putting drone in hover mode before dynamic replanning
2025-05-23 02:11:09,863 - INFO - Episode 2: Triggering dynamic replanning due to detected obstacle
2025-05-23 02:11:09,863 - ERROR - Error in episode 2: cannot access local variable 'observation' where it is not associated with a value
2025-05-23 02:11:09,865 - ERROR - Traceback (most recent call last):
  File "c:\Users\harshil_airsim_1\Desktop\AirSim\Hierarchical-Active-Inference-for-Autonomous-Drone-Navigation-in-Microsoft-AirSim\data_collection.py", line 3581, in run_experiment
    step_metrics, episode_summary = run_episode(
                                    ^^^^^^^^^^^^
  File "c:\Users\harshil_airsim_1\Desktop\AirSim\Hierarchical-Active-Inference-for-Autonomous-Drone-Navigation-in-Microsoft-AirSim\data_collection.py", line 3118, in run_episode
    next_waypoint, policy, planning_error, replanning_inference_time_ms = get_next_waypoint(needs_replanning=True)
                                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\harshil_airsim_1\Desktop\AirSim\Hierarchical-Active-Inference-for-Autonomous-Drone-Navigation-in-Microsoft-AirSim\data_collection.py", line 2695, in get_next_waypoint
    observation["replanning_reason"] = reason
    ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'observation' where it is not associated with a value

2025-05-23 02:11:09,866 - INFO - Saved recovery data for episode 1
2025-05-23 02:11:09,867 - INFO - Starting episode 3 of 10
2025-05-23 02:11:09,867 - INFO - === Starting Episode 3 ===
2025-05-23 02:11:09,869 - INFO - Episode 3: Taking off...
2025-05-23 02:11:15,483 - INFO - Episode 3: Using pre-generated target 3 of 15
2025-05-23 02:11:15,484 - INFO - Episode 3: Initial distance to target: 19.69m
2025-05-23 02:11:15,485 - INFO - Episode 3: Initial position: [-0.0, 0.0, -1.67]
2025-05-23 02:11:15,485 - INFO - Episode 3: Target position: [-2.59, 18.7, -7.29]
2025-05-23 02:11:15,485 - INFO - Episode 3: Initial distance: 19.69m
2025-05-23 02:11:15,489 - INFO - Episode 3: Target verified with 3 rays
2025-05-23 02:11:20,948 - WARNING - Episode 3: Step 0 took 5.46s (unusually long)
2025-05-23 02:11:31,117 - INFO - Episode 3: Target reached at step 4
2025-05-23 02:12:34,140 - INFO - Episode 3 completed: success
2025-05-23 02:12:34,140 - INFO -   Steps: 4, Duration: 15.63s
2025-05-23 02:12:34,140 - INFO -   Final distance: 1.27m, Collisions: 0
2025-05-23 02:12:34,141 - INFO -   Dynamic replanning events: 0
2025-05-23 02:12:34,148 - INFO - Saved recovery data for episode 3
2025-05-23 02:12:34,149 - INFO - Starting episode 4 of 10
2025-05-23 02:12:34,149 - INFO - === Starting Episode 4 ===
2025-05-23 02:12:34,152 - INFO - Episode 4: Taking off...
2025-05-23 02:12:39,747 - INFO - Episode 4: Using pre-generated target 4 of 15
2025-05-23 02:12:39,747 - INFO - Episode 4: Initial distance to target: 35.87m
2025-05-23 02:12:39,748 - INFO - Episode 4: Initial position: [-0.0, 0.0, -1.67]
2025-05-23 02:12:39,748 - INFO - Episode 4: Target position: [27.36, -23.14, -3.12]
2025-05-23 02:12:39,748 - INFO - Episode 4: Initial distance: 35.87m
2025-05-23 02:12:39,752 - INFO - Episode 4: Target verified with 3 rays
2025-05-23 02:12:45,758 - WARNING - Episode 4: Step 0 took 6.01s (unusually long)
2025-05-23 02:13:08,895 - INFO - Episode 4: Target reached at step 9
2025-05-23 02:13:37,353 - INFO - Episode 4 completed: success
2025-05-23 02:13:37,353 - INFO -   Steps: 9, Duration: 29.15s
2025-05-23 02:13:37,353 - INFO -   Final distance: 1.08m, Collisions: 0
2025-05-23 02:13:37,353 - INFO -   Dynamic replanning events: 0
2025-05-23 02:13:37,359 - INFO - Saved recovery data for episode 4
2025-05-23 02:13:37,360 - INFO - Starting episode 5 of 10
2025-05-23 02:13:37,360 - INFO - === Starting Episode 5 ===
2025-05-23 02:13:37,364 - INFO - Episode 5: Taking off...
2025-05-23 02:13:42,952 - INFO - Episode 5: Using pre-generated target 5 of 15
2025-05-23 02:13:42,952 - INFO - Episode 5: Initial distance to target: 32.72m
2025-05-23 02:13:42,953 - INFO - Episode 5: Initial position: [-0.0, 0.0, -1.66]
2025-05-23 02:13:42,953 - INFO - Episode 5: Target position: [-19.25, 25.86, -7.25]
2025-05-23 02:13:42,953 - INFO - Episode 5: Initial distance: 32.72m
2025-05-23 02:13:42,957 - INFO - Episode 5: Target verified with 3 rays
2025-05-23 02:13:48,876 - WARNING - Episode 5: Step 0 took 5.92s (unusually long)
2025-05-23 02:14:09,352 - INFO - Episode 5: Target reached at step 8
2025-05-23 02:15:12,427 - INFO - Episode 5 completed: success
2025-05-23 02:15:12,428 - INFO -   Steps: 8, Duration: 26.40s
2025-05-23 02:15:12,428 - INFO -   Final distance: 1.09m, Collisions: 0
2025-05-23 02:15:12,428 - INFO -   Dynamic replanning events: 0
2025-05-23 02:15:12,435 - INFO - Saved recovery data for episode 5
2025-05-23 02:15:12,436 - INFO - Starting episode 6 of 10
2025-05-23 02:15:12,436 - INFO - === Starting Episode 6 ===
2025-05-23 02:15:12,439 - INFO - Episode 6: Taking off...
2025-05-23 02:15:18,026 - INFO - Episode 6: Using pre-generated target 6 of 15
2025-05-23 02:15:18,026 - INFO - Episode 6: Initial distance to target: 41.20m
2025-05-23 02:15:18,027 - INFO - Episode 6: Initial position: [-0.0, 0.0, -1.67]
2025-05-23 02:15:18,027 - INFO - Episode 6: Target position: [-38.92, -12.15, -7.58]
2025-05-23 02:15:18,027 - INFO - Episode 6: Initial distance: 41.20m
2025-05-23 02:15:18,033 - INFO - Episode 6: Target verified with 3 rays
2025-05-23 02:15:24,605 - WARNING - Episode 6: Step 0 took 6.57s (unusually long)
2025-05-23 02:15:33,055 - WARNING - Collision detected during movement, cancelling task immediately
2025-05-23 02:15:33,056 - INFO - Episode 6: Obstacle detected during movement, triggering immediate replanning
2025-05-23 02:15:33,071 - INFO - Adding newly detected obstacle at [-14.19, -4.73, -2.26] to planning data
2025-05-23 02:15:33,071 - INFO - Episode 6: Putting drone in hover mode before dynamic replanning
2025-05-23 02:15:33,573 - INFO - Episode 6: Triggering dynamic replanning due to detected obstacle
2025-05-23 02:15:33,573 - ERROR - Error in episode 6: cannot access local variable 'observation' where it is not associated with a value
2025-05-23 02:15:33,575 - ERROR - Traceback (most recent call last):
  File "c:\Users\harshil_airsim_1\Desktop\AirSim\Hierarchical-Active-Inference-for-Autonomous-Drone-Navigation-in-Microsoft-AirSim\data_collection.py", line 3581, in run_experiment
    step_metrics, episode_summary = run_episode(
                                    ^^^^^^^^^^^^
  File "c:\Users\harshil_airsim_1\Desktop\AirSim\Hierarchical-Active-Inference-for-Autonomous-Drone-Navigation-in-Microsoft-AirSim\data_collection.py", line 3118, in run_episode
    next_waypoint, policy, planning_error, replanning_inference_time_ms = get_next_waypoint(needs_replanning=True)
                                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\harshil_airsim_1\Desktop\AirSim\Hierarchical-Active-Inference-for-Autonomous-Drone-Navigation-in-Microsoft-AirSim\data_collection.py", line 2695, in get_next_waypoint
    observation["replanning_reason"] = reason
    ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'observation' where it is not associated with a value

2025-05-23 02:15:33,576 - INFO - Saved recovery data for episode 5
2025-05-23 02:15:33,576 - INFO - Starting episode 7 of 10
2025-05-23 02:15:33,577 - INFO - === Starting Episode 7 ===
2025-05-23 02:15:33,578 - INFO - Episode 7: Taking off...
2025-05-23 02:15:39,159 - INFO - Episode 7: Using pre-generated target 7 of 15
2025-05-23 02:15:39,159 - INFO - Episode 7: Initial distance to target: 22.10m
2025-05-23 02:15:39,160 - INFO - Episode 7: Initial position: [-0.0, 0.0, -1.67]
2025-05-23 02:15:39,160 - INFO - Episode 7: Target position: [20.07, 8.97, -3.98]
2025-05-23 02:15:39,160 - INFO - Episode 7: Initial distance: 22.10m
2025-05-23 02:15:39,164 - INFO - Episode 7: Target verified with 3 rays
2025-05-23 02:15:44,176 - WARNING - Episode 7: Step 0 took 5.01s (unusually long)
2025-05-23 02:15:58,285 - WARNING - Episode 7: Step 4 took 5.61s (unusually long)
2025-05-23 02:15:58,286 - INFO - Episode 7: Target reached at step 5
2025-05-23 02:17:00,792 - INFO - Episode 7 completed: success
2025-05-23 02:17:00,792 - INFO -   Steps: 5, Duration: 19.13s
2025-05-23 02:17:00,792 - INFO -   Final distance: 1.30m, Collisions: 0
2025-05-23 02:17:00,792 - INFO -   Dynamic replanning events: 0
2025-05-23 02:17:00,799 - INFO - Saved recovery data for episode 7
2025-05-23 02:17:00,800 - INFO - Starting episode 8 of 10
2025-05-23 02:17:00,800 - INFO - === Starting Episode 8 ===
2025-05-23 02:17:00,803 - INFO - Episode 8: Taking off...
2025-05-23 02:17:06,400 - INFO - Episode 8: Using pre-generated target 8 of 15
2025-05-23 02:17:06,400 - INFO - Episode 8: Initial distance to target: 39.28m
2025-05-23 02:17:06,401 - INFO - Episode 8: Initial position: [-0.0, 0.0, -1.67]
2025-05-23 02:17:06,401 - INFO - Episode 8: Target position: [-38.76, 0.6, -8.06]
2025-05-23 02:17:06,401 - INFO - Episode 8: Initial distance: 39.28m
2025-05-23 02:17:06,405 - INFO - Episode 8: Target verified with 3 rays
2025-05-23 02:17:12,916 - WARNING - Episode 8: Step 0 took 6.51s (unusually long)
2025-05-23 02:17:24,301 - WARNING - Collision detected during movement, cancelling task immediately
2025-05-23 02:17:24,303 - INFO - Episode 8: Obstacle detected during movement, triggering immediate replanning
2025-05-23 02:17:24,318 - INFO - Adding newly detected obstacle at [-18.84, -0.13, -2.65] to planning data
2025-05-23 02:17:24,318 - INFO - Episode 8: Putting drone in hover mode before dynamic replanning
2025-05-23 02:17:24,820 - INFO - Episode 8: Triggering dynamic replanning due to detected obstacle
2025-05-23 02:17:24,821 - ERROR - Error in episode 8: cannot access local variable 'observation' where it is not associated with a value
2025-05-23 02:17:24,823 - ERROR - Traceback (most recent call last):
  File "c:\Users\harshil_airsim_1\Desktop\AirSim\Hierarchical-Active-Inference-for-Autonomous-Drone-Navigation-in-Microsoft-AirSim\data_collection.py", line 3581, in run_experiment
    step_metrics, episode_summary = run_episode(
                                    ^^^^^^^^^^^^
  File "c:\Users\harshil_airsim_1\Desktop\AirSim\Hierarchical-Active-Inference-for-Autonomous-Drone-Navigation-in-Microsoft-AirSim\data_collection.py", line 3118, in run_episode
    next_waypoint, policy, planning_error, replanning_inference_time_ms = get_next_waypoint(needs_replanning=True)
                                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\harshil_airsim_1\Desktop\AirSim\Hierarchical-Active-Inference-for-Autonomous-Drone-Navigation-in-Microsoft-AirSim\data_collection.py", line 2695, in get_next_waypoint
    observation["replanning_reason"] = reason
    ^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'observation' where it is not associated with a value

2025-05-23 02:17:24,824 - INFO - Saved recovery data for episode 7
2025-05-23 02:17:24,825 - INFO - Starting episode 9 of 10
2025-05-23 02:17:24,825 - INFO - === Starting Episode 9 ===
2025-05-23 02:17:24,833 - INFO - Episode 9: Taking off...
2025-05-23 02:17:30,414 - INFO - Episode 9: Using pre-generated target 9 of 15
2025-05-23 02:17:30,414 - INFO - Episode 9: Initial distance to target: 24.50m
2025-05-23 02:17:30,415 - INFO - Episode 9: Initial position: [-0.0, 0.0, -1.67]
2025-05-23 02:17:30,415 - INFO - Episode 9: Target position: [1.0, 24.42, -3.43]
2025-05-23 02:17:30,415 - INFO - Episode 9: Initial distance: 24.50m
2025-05-23 02:17:30,420 - INFO - Episode 9: Target verified with 3 rays
2025-05-23 02:17:35,534 - WARNING - Episode 9: Step 0 took 5.11s (unusually long)
2025-05-23 02:17:49,580 - WARNING - Episode 9: Step 4 took 5.94s (unusually long)
2025-05-23 02:17:49,598 - INFO - Episode 9: Clear path to target detected - moving directly toward goal
2025-05-23 02:17:55,459 - WARNING - Episode 9: Step 5 took 5.88s (unusually long)
2025-05-23 02:17:55,460 - INFO - Episode 9: Target reached at step 6
2025-05-23 02:18:36,776 - INFO - Episode 9 completed: success
2025-05-23 02:18:36,776 - INFO -   Steps: 6, Duration: 25.05s
2025-05-23 02:18:36,776 - INFO -   Final distance: 0.57m, Collisions: 0
2025-05-23 02:18:36,776 - INFO -   Dynamic replanning events: 0
2025-05-23 02:18:36,784 - INFO - Saved recovery data for episode 9
2025-05-23 02:18:41,750 - INFO - Successfully created 14 plots in experiment_results\experiment_20250523_020720\metrics_plots
2025-05-23 02:18:41,750 - INFO - Metrics plots saved to experiment_results\experiment_20250523_020720\metrics_plots
2025-05-23 02:18:41,751 - INFO - Experiment completed successfully, removed recovery data
2025-05-23 02:18:41,751 - INFO - Experiment completed. Results saved to experiment_results\experiment_20250523_020720
